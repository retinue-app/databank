{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://schema.retinue.app/CardAction.json",
  "title": "CardAction",

  "description": "Defines a card-attached action.",
  "additionalProperties": false,

  "definitions": {
    "CardActionTarget": {
      "properties": {
        "range": {
          "$ref": "./Range.json"
        },

        "is": {
          "anyOf": [
            {
              "enum": ["Self"]
            },
            {
              "$ref": "./TargetSet.json"
            }
          ]
        },

        "not": {
          "$ref": "./TargetSet.json"
        },

        "miniature": {
          "enum": [true]
        },

        "inLineOfSight": {
          "enum": [true]
        }
      },

      "additionalProperties": false,
      "minProperties": 1
    }
  },

  "properties": {
    "description": {
      "type": "string",
      "minLength": 1
    },

    "actions": {
      "type": "number",
      "minimum": 0,
      "maximum": 2
    },

    "target": {
      "$ref": "#/definitions/CardActionTarget"
    },

    "grants": {
      "properties": {
        "keywords": {
          "$ref": "./PassiveKeywordSet.json"
        },

        "duration": {
          "$ref": "./Duration.json"
        },

        "tokens": {
          "type": "object",
          "minProperties": 1,
          "propertyNames": {
            "$ref": "./Token.json"
          },
          "additionalProperties": {
            "type": "number",
            "minimum": 1
          }
        }
      },

      "additionalProperties": false,
      "minProperties": 1
    }
  },

  "required": ["actions"]
}
